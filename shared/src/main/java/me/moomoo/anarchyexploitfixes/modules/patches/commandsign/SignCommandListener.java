package me.moomoo.anarchyexploitfixes.modules.patches.commandsign;

import io.papermc.paper.event.player.PlayerSignCommandPreprocessEvent;
import me.moomoo.anarchyexploitfixes.enums.AEFPermission;
import org.bukkit.event.EventHandler;
import org.bukkit.event.EventPriority;
import org.bukkit.event.Listener;

public class SignCommandListener implements Listener {

    @EventHandler(priority = EventPriority.HIGHEST, ignoreCancelled = true)
    private void onSignCommandPreprocess(PlayerSignCommandPreprocessEvent event) {
        if (!event.getPlayer().hasPermission(AEFPermission.BYPASS_PREVENTION_COMMANDSIGN.get())) {
            event.setCancelled(true);
        }
    }

    public static boolean isSupported() {
        try {
            Class.forName("io.papermc.paper.event.player.PlayerSignCommandPreprocessEvent");
            return true;
        } catch (ClassNotFoundException e) {
            return false;
        }
    }
}
